@page
@model IndexModel
@{
    ViewData["Title"] = "Home page";
}

<div style="text-align:center; padding:20px">
    <form method="get" asp-page-handler="Search">
        <span style="color:#ffc7c7; font-size:25px"><b>Filters</b></span>
        <input class="search" type="search" name="title" placeholder="title">
        <input class="search" type="search" name="author" placeholder="author">
        <input class="search" type="search" name="category" placeholder="category">
        <input type="submit" value="Search" style="font-size: 15px; width: 130px; padding: 12px 24px; display: inline-block; border-radius: 5px; background-color: #884DFF; color: #ffc7c7; opacity: 0.5; box-shadow: 0 8px 16px 0 rgba(0,0,0,0.2), 0 6px 20px 0 rgba(0,0,0,0.19); text-align: left;"><!--&#xFE0E szkło powiększające-->
    </form>
</div>
<div>
    @foreach (var recipe in Model.Recipes)
    {
            <div class="recipe">
                <a asp-page="/Recipe" asp-route-recipeId="@recipe.RecipeId" style="text-decoration: none">
                    <div class="row" style="text-align:center">
                        <div class="col">
                            <h5>@recipe.Title</h5>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col" style="float:left; width:50%;">
                            <img class="main-page-img" src="~/Data/Images/@recipe.ImageName">
                        </div>
                        <div class="col" style="float:left; width:50%;">
                            <p>@recipe.Description</p>
                        </div>
                    </div>
                </a>
                <div class="row" style="float:right">
                    <span>@{var value = recipe.Upvoters.Count - recipe.Downvoters.Count();} @value</span>
                    <form id="Like" method="post">
                        <input type="hidden" name="userId" value="@Model.userId">
                        <input type="hidden" name="recipeId" value="@recipe.RecipeId">
                        <input type="hidden" name="like" value="true">
                        <input class="reactions" id="like" type="submit" value="&#129121;">
                    </form>
                    <form id="Unlike" method="post">
                        <input type="hidden" name="userId" value="@User.Identity.Name">
                        <input type="hidden" name="recipeId" value="@recipe.RecipeId">
                        <input type="hidden" name="like" value="false">
                        <input class="reactions" id="unlike" type="submit" value="&#129123;">
                    </form>
                    <form id="Follow" asp-page-handler="Favourites">
                        <input type="hidden" name="userId" value="@User.Identity.Name">
                        <input type="hidden" name="recipeId" value="@recipe.RecipeId">
                        @if (!recipe.Downvoters.Contains(Model.AppUser))
                        {
                            <input class="reactions" type="submit" value="&#9825;">
                        }
                        else
                        {
                            <input class="reactions" type="submit" value="&#9829;">
                        }
                    </form>
                </div>
            </div>
        }
</div>
<div>
    <!--<form method="post" asp-page-handler="AddRecipe">
        <input type="submit" value="AddRecipe">
    </form>-->
</div>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
